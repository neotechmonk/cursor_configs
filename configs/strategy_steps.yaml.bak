# YAML Structure Explanation:
# - LHS (left-hand side): Names of parameters in the function definition
# - RHS (right-hand side): 
#   - For input_params_map: Name to look up in the execution context
#   - For return_map: "_" means use function's return value directly, otherwise rename the return value
#   - For config_mapping: Name to look up in the config
steps:
  detect_trend:
    function: "src.utils.get_trend"
    input_params_map: {}  # No input parameters needed
    return_map:
      trend: "_"  # Direct value from function return

  find_extreme:
    function: "src.utils.is_extreme_bar"
    input_params_map:
      trend: "trend"  # Source determined by execution layer
    return_map:
      is_extreme: "_"  # Direct value from function return

  validate_pullback:
    function: "src.utils.is_bars_since_extreme_pivot_valid"
    input_params_map:
      major_swing_high_idx: "extreme_bar_index"  # Source determined by execution layer
    return_map:
      bars_valid: "_"  # Direct value from function return

  check_fib:
    function: "src.utils.is_within_fib_extension"
    input_params_map:
      trend: "trend"
      ref_swing_start_idx: "bar_index_start"
      ref_swing_end_idx: "bar_index_end"
    return_map:
      fib_valid: "_"  # Direct value from function return

config_mapping:
  frame_size: "frame_size"
  min_bars: "min_bars"
  max_bars: "max_bars"
  min_fib_extension: "min_fib_extension"
  max_fib_extension: "max_fib_extension" 